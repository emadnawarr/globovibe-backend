generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Country {
  id              Int               @id @default(autoincrement())
  name            String
  region          Region
  iso_code        String           @db.VarChar(2)
  events          Event[]
  moods           Mood[]
  moodPredictions Mood_Prediction[]
}

model Event {
  id              Int               @id @default(autoincrement())
  title           String
  description     String
  content         String?
  article_id      String @default("UNKNOWN") @unique
  language        String @default("UNKNOWN")
  category        Category[]
  source          String
  country_id      Int
  publish_date    DateTime
  country         Country           @relation(fields: [country_id], references: [id])
  moods           Mood[]
  moodPredictions Mood_Prediction[]
}

model Mood {
  id         Int      @id @default(autoincrement())
  type       MoodType
  intensity  Float
  date       DateTime
  country_id Int
  event_id   Int
  country    Country  @relation(fields: [country_id], references: [id])
  event      Event    @relation(fields: [event_id], references: [id])
}

model Mood_Prediction {
  id               Int      @id @default(autoincrement())
  type             MoodType
  intensity        Float
  confidence_level Float
  prediction_date  DateTime
  country_id       Int
  event_id         Int
  country          Country  @relation(fields: [country_id], references: [id])
  event            Event    @relation(fields: [event_id], references: [id])
}

enum Region {
  Africa
  Europe
  Asia
  North_America
  South_America
  Oceania
}

enum Category {
  top
  politics
  domestic
  other
}

enum MoodType {
  HAPPY
  SAD
  ANGRY
  NEUTRAL
}
